<Window x:Class="Fractals.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Fractals"
        mc:Ignorable="d"
        Title="Fractals" Height="523" Width="775" SizeChanged="UpdateFractal">

    <Window.Resources>

        <Style x:Key="SliderRepeatButton" TargetType="RepeatButton">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="IsTabStop" Value="false" />
            <Setter Property="Focusable" Value="false" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Border  BorderThickness="1" BorderBrush="Silver" Background="Silver" Height="3"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SliderRepeatButton1" TargetType="RepeatButton">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Border SnapsToDevicePixels="True" Background="DarkOrange"  BorderThickness="1" BorderBrush="Orange" Height="3"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SliderThumb" TargetType="Thumb">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Ellipse Height="10" Width="10" Fill="DarkOrange"></Ellipse>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="Slider"  TargetType="Slider">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Track Grid.Row="1" x:Name="PART_Track"   >
                    <Track.DecreaseRepeatButton>
                        <RepeatButton Style="{StaticResource SliderRepeatButton1}"  Command="Slider.DecreaseLarge" />
                    </Track.DecreaseRepeatButton>
                    <Track.Thumb>
                        <Thumb Style="{StaticResource SliderThumb}"  />
                    </Track.Thumb>
                    <Track.IncreaseRepeatButton>
                        <RepeatButton Style="{StaticResource SliderRepeatButton}" Command="Slider.IncreaseLarge" />
                    </Track.IncreaseRepeatButton>
                </Track>
            </Grid>
        </ControlTemplate>

        <Style x:Key="Horizontal_Slider" TargetType="Slider">
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Style.Triggers>
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="MinHeight" Value="21" />
                    <Setter Property="MinWidth" Value="104" />
                    <Setter Property="Template" Value="{StaticResource Slider}" />
                </Trigger>
            </Style.Triggers>
        </Style>


        <ControlTemplate TargetType="Button" x:Key="btTemplate">
            <Border CornerRadius="25" Background="DarkOrange" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}" >
                <ContentControl Margin="{TemplateBinding Padding}"
                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                    Content="{TemplateBinding Content}"
                    Foreground="White"
                    FontFamily="Century Gothic" 
                    FontWeight="Bold"
                    FontStyle="Normal"
                    FontSize="18"/>
                <Border.Effect>
                    <DropShadowEffect Opacity="0.3" BlurRadius="10" ShadowDepth="3"/>
                </Border.Effect>
            </Border>
        </ControlTemplate>

        <ControlTemplate TargetType="Button" x:Key="ColorbtTemplate">
            <Border BorderBrush="Black" BorderThickness="2" CornerRadius="5" Background="{TemplateBinding Background}" Height="40" Width="40" >
                <ContentControl
                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                <Border.Effect>
                    <DropShadowEffect Opacity="0.3" BlurRadius="10" ShadowDepth="3"/>
                </Border.Effect>
            </Border>
        </ControlTemplate>

        <Style x:Key="textStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Century Gothic"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width ="287*"/>
            <ColumnDefinition Width="33*"/>
            <ColumnDefinition Width="189*"/>
            <ColumnDefinition Width="291*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <ComboBox x:Name="fractalComboBox" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Center" SelectionChanged="fractalComboBox_SelectionChanged"
                  FontFamily="Century Gothic" FontSize="16" FontWeight="Bold" Background="White">
            <ComboBoxItem Content="Pascal Tree"/>
            <ComboBoxItem Content="Koch curve"/>
            <ComboBoxItem Content="Sierpinski Carpet"/>
            <ComboBoxItem Content="Sierpinski Triangle"/>
            <ComboBoxItem Content="Cantor Set"/>
        </ComboBox>

        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0">
                <TextBlock Style="{StaticResource textStyle}" Text ="Iterations:" />
                <Slider x:Name="iterationsSlider" Margin="10 5 10 5" Minimum="1" IsSnapToTickEnabled="True" TickFrequency="1" ValueChanged="UpdateFractal"
                        Style="{StaticResource Horizontal_Slider}" AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="0"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Style="{StaticResource textStyle}" Text="Start color:"/>
                    <Button Grid.Column="1" Grid.Row="0" HorizontalAlignment="Left" Margin="10 5 10 5" Template="{StaticResource ColorbtTemplate}" x:Name="startColorButton" Click="startColorButton_Click"/>
                    <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Style="{StaticResource textStyle}" Text="End color:"/>
                    <Button Grid.Column="1" Grid.Row="1" HorizontalAlignment="Left" Margin="10 5 10 5" Template="{StaticResource ColorbtTemplate}" x:Name="endColorButton" Click="endColorButton_Click"/>

                </Grid>
                <StackPanel Visibility="Collapsed" x:Name="pascalTreeSettings">
                    <TextBlock Style="{StaticResource textStyle}" Text="Start length:"/>
                    <Slider Margin="10 5 10 5" Minimum="40" Maximum="200" IsSnapToTickEnabled="True" TickFrequency="1" x:Name="startLengthSlider" Value="100" ValueChanged="startLengthSlider_ValueChanged"
                            Style="{StaticResource Horizontal_Slider}" AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="0"/>
                    <TextBlock Style="{StaticResource textStyle}" Text="Coefficient:"/>
                    <Slider Margin="10 5 10 5" Minimum="0.1" Maximum="1" x:Name="coefficientSlider" Value="0.8" ValueChanged="coefficientSlider_ValueChanged"
                            Style="{StaticResource Horizontal_Slider}" AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="2"/>
                    <TextBlock Style="{StaticResource textStyle}" Text="Left angle:"/>
                    <Slider Margin="10 5 10 5" Minimum="0" Maximum="90" IsSnapToTickEnabled="True" TickFrequency="1" x:Name="leftAngleSlider" Value="45" ValueChanged="leftAngleSlider_ValueChanged"
                            Style="{StaticResource Horizontal_Slider}" AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="0"/>
                    <TextBlock Style="{StaticResource textStyle}" Text="Right angle:"/>
                    <Slider Margin="10 5 10 5" Minimum="0" Maximum="90" IsSnapToTickEnabled="True" TickFrequency="1" x:Name="rightAngleSlider" Value="45" ValueChanged="rightAngleSlider_ValueChanged"
                            Style="{StaticResource Horizontal_Slider}" AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="0"/>
                </StackPanel>
                <StackPanel x:Name="cantorSetSettings" Visibility="Collapsed">
                    <TextBlock Style="{StaticResource textStyle}" Text="Distance:"/>
                    <Slider Margin="10 5 10 5" Minimum="10" Maximum="150" IsSnapToTickEnabled="True" TickFrequency="1" x:Name="distanceSlider" Value="50" ValueChanged="distanceSlider_ValueChanged"
                            Style="{StaticResource Horizontal_Slider}" AutoToolTipPlacement="BottomRight" AutoToolTipPrecision="0"/>
                </StackPanel>
            </StackPanel>
            <Button Width="120" Height="35" Template="{StaticResource btTemplate}" Margin="10" Grid.Row="1" Content="Redraw!" Click ="UpdateFractal"/>
        </Grid>
        <Border Margin="10" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="2" BorderBrush="DarkOrange" BorderThickness="4" CornerRadius="25" Background="White">
            <Canvas x:Name="canvas" ClipToBounds="True"  />
            <Border.Effect>
                <DropShadowEffect Opacity="0.3" BlurRadius="10" ShadowDepth="3"/>
            </Border.Effect>
        </Border>
    </Grid>
</Window>
